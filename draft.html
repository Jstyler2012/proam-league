<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Draft • Wellman Golf Club PRO-AM 2026</title>
  <style>
    body{margin:0;font-family:system-ui;background:#0b1220;color:#e8eefc}
    .wrap{max-width:1100px;margin:0 auto;padding:28px 18px 60px}
    a{color:#e8eefc;text-decoration:none}
    .card{border:1px solid rgba(255,255,255,.10);border-radius:16px;background:rgba(255,255,255,.04);margin-bottom:16px;overflow:hidden}
    .hd{padding:12px 16px;border-bottom:1px solid rgba(255,255,255,.10);display:flex;justify-content:space-between;align-items:center}
    .bd{padding:16px}
    .badge{padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.10);color:#a9b7d6;font-size:12px}
    .btn{border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.06);color:#e8eefc;border-radius:12px;padding:10px 12px;cursor:pointer;font-weight:700}
  </style>
</head>
<body>
<div class="wrap">
  <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;margin-bottom:16px">
    <div><a href="/">← Home</a></div>
    <div style="display:flex;gap:10px;flex-wrap:wrap">
      <a class="btn" href="/signup.html">Sign up / Login</a>
      <button class="btn" id="refreshBtn">Refresh</button>
    </div>
  </div>

  <div class="card">
    <div class="hd">
      <div style="font-weight:900">Draft — This Week</div>
      <span class="badge" id="weekBadge">—</span>
    </div>
    <div class="bd" style="display:flex;gap:14px;align-items:center;flex-wrap:wrap">
      <img id="logo" alt="" style="width:64px;height:64px;border-radius:14px;border:1px solid rgba(255,255,255,.10);display:none;object-fit:contain">
      <div>
        <div id="name" style="font-weight:900;font-size:18px">—</div>
        <div id="dates" style="color:#a9b7d6;margin-top:4px">—</div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="hd"><div style="font-weight:900">Draft Board</div><span class="badge">Next step</span></div>
    <div class="bd" style="color:#a9b7d6">
      This page is wired for the correct weekly tournament header.
      <br><br>
      Next step is implementing:
      <ul>
        <li>field list (ordered by odds)</li>
        <li>draft window rules (Mon 12pm → Wed 11:59pm ET)</li>
        <li>pick locking + “change pick if unclaimed”</li>
        <li>live picks board</li>
      </ul>
    </div>
  </div>
</div>

<script>
  const API = {
    currentWeek: "/.netlify/functions/public/current-week",
  };
  const $ = (id) => document.getElementById(id);

  async function getJSON(url){
    const r = await fetch(url, { headers: { "accept":"application/json" }});
    const t = await r.text();
    let j = null; try{ j = t ? JSON.parse(t) : null }catch(e){}
    if(!r.ok) throw new Error((j && (j.error||j.message)) ? (j.error||j.message) : (t || r.statusText));
    return j;
  }

  function fmtDateRange(startISO, endISO){
    if(!startISO || !endISO) return "—";
    const opts = { month:"short", day:"numeric", year:"numeric" };
    const s = new Date(startISO + "T00:00:00");
    const e = new Date(endISO + "T00:00:00");
    return `${s.toLocaleDateString("en-US", opts)} – ${e.toLocaleDateString("en-US", opts)}`;
  }

  async function boot(){
    const j = await getJSON(API.currentWeek);
    const w = j.week;
    if(!w) return;

    const label = w.label || `Week ${w.week_number || "—"}`;
    $("weekBadge").textContent = label;
    $("name").textContent = w.tournament_name || "—";
    $("dates").textContent = fmtDateRange(w.start_date, w.end_date);

    if(w.logo_url){
      $("logo").src = w.logo_url;
      $("logo").style.display = "block";
    } else {
      $("logo").style.display = "none";
    }
  }

  $("refreshBtn").addEventListener("click", boot);
  boot();
</script>
</body>
</html>
