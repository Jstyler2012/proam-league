<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Draft • Wellman Golf Club PRO-AM 2026</title>

  <!-- Use shared site styles -->
  <link rel="stylesheet" href="./styles.css">
</head>

<body>
<div class="wrap">
<header>
  <div class="pillrow">
    <div class="pill">
      <span class="mono">Draft Portal</span>
    </div>
    <button class="btn secondary" id="refreshBtn">Refresh</button>
  </div>

  <div style="width:100%; margin-top:12px;">
    <div style="display:flex;gap:8px;flex-wrap:wrap;border-top:1px solid var(--border);padding-top:10px;">
      <a href="./index.html" class="navTab">Home</a>
      <a href="./draft.html" class="navTab navTabActive">Draft</a>
      <a href="./rules.html" class="navTab">Rules</a>
      <a href="./signup.html" class="navTab">Sign Up</a>
    </div>
  </div>
</header>
  </header>


  <!-- Week Details Card -->
  <div class="card" style="margin-bottom:16px;">

    <div class="hd">
      <h2>This Week's Draft</h2>
      <span class="badge gray" id="weekBadge">—</span>
    </div>

    <div class="weekHero">

      <div class="weekHeroOverlay"></div>

      <div class="weekHeroContent">

        <img id="logo"
             class="weekHeroLogo"
             alt=""
             style="display:none;">

        <div class="weekHeroText">

          <div class="weekHeroTitle" id="name">—</div>

          <div class="weekHeroDates" id="dates">—</div>

        </div>

      </div>

    </div>

  </div>


  <!-- Draft Board Card -->
  <div class="card">

    <div class="hd">
      <h2>Draft Board</h2>
      <span class="badge gray">Coming Soon</span>
    </div>

    <div class="bd">

      <div class="msg">
        This page is connected to the correct weekly tournament.

        Next step is implementing:

        • Field list (ordered by odds)  
        • Draft window rules  
        • Pick locking  
        • Live picks board  

      </div>

    </div>

  </div>


  <div class="footer">
    Draft Portal • Wellman Golf Club Pro-Am League
  </div>

</div>


<script>
const API = {
  currentWeek: "/.netlify/functions/public/current-week",
};

const $ = (id) => document.getElementById(id);

async function getJSON(url){
  const r = await fetch(url, { headers: { "accept":"application/json" }});
  const t = await r.text();
  let j = null;
  try{ j = t ? JSON.parse(t) : null }catch(e){}
  if(!r.ok) throw new Error((j && (j.error||j.message)) ? (j.error||j.message) : (t || r.statusText));
  return j;
}

function fmtDateRange(startISO, endISO){
  if(!startISO || !endISO) return "—";

  const opts = { month:"short", day:"numeric", year:"numeric" };

  const s = new Date(startISO + "T00:00:00");
  const e = new Date(endISO + "T00:00:00");

  return `${s.toLocaleDateString("en-US", opts)} – ${e.toLocaleDateString("en-US", opts)}`;
}

async function boot(){

  const j = await getJSON(API.currentWeek);

  const w = j.week;

  if(!w) return;

  const label = w.label || `Week ${w.week_number || "—"}`;

  $("weekBadge").textContent = label;

  $("name").textContent = w.tournament_name || "—";

  $("dates").textContent = fmtDateRange(w.start_date, w.end_date);

  if(w.logo_url){

    $("logo").src = w.logo_url;

    $("logo").style.display = "block";

  } else {

    $("logo").style.display = "none";

  }

}

$("refreshBtn").addEventListener("click", boot);

boot();

</script>

</body>
</html>
